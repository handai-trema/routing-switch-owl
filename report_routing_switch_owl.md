#情報ネットワーク学演習II 11/16 レポート課題
===========
チーム名　owl  
メンバー 秋下 耀介、坂田 航樹、坂本 昂輝、佐竹 幸大、田中 達也、Jens Oetjen、齊藤 卓哉  

## 役割分担
* 経路選択アルゴリズムのプログラム作成　佐竹
* 可視化のプログラム作成　秋下、坂本
* 経路選択アルゴリズム部分のレポート作成　佐竹
* 可視化部分のレポート作成　秋下、坂本

## 課題 (経路選択アルゴリズムの実装と可視化)

* ルーティングスイッチのダイクストラ法を、別の経路選択アルゴリズムに置き換える
	* 経路の重み (= リンクの太さ) などを導入してもいいです
* コントローラの動作をブラウザで見れるように可視化する
	* 選択した経路やアルゴリズムの動作が分かるように工夫してください


## 解答
本課題に取り組むにあたり、実装箇所を以下の２つに切り分けた。
* 経路選択のアルゴリズム
* 可視化プログラム

以降、それぞれについて説明する。

### 経路選択のアルゴリズム



### 可視化プログラム
本機能の実装を前回と同様に以下の２つに切り分けた。

* 経路情報の取得およびテキストファイル出力(担当：秋下)
* テキスト情報に基づいたvis.jsによる経路の表示（担当：坂本）  
それぞれについての説明を以下に示す。

#### <a id="txt_format" style="color: black;">経路情報のテキストファイル出力</a>
前回の課題において、ノード（ホストおよびスイッチ）とリンクの情報をテキストファイル（toplogy.txt）として出力するプログラム（vis.rb）を作成した。経路情報の表示も同様のプログラムを拡張することによって新たなファイル(path.txt)を出力するものとした。
ただし、今回は経路情報も表示するため、各リンクのIDも必要となる。そこで、topology.txtのリンク情報はIDをもつものとして、path.txtはそのIDを経路として取り扱った。topology.txtの一例が以下のようになっている。

```
6 Switch:6
1 Switch:1
4 Switch:4
3 Switch:3
2 Switch:2
5 Switch:5
host
11:11:11:11:11:11 Host:11:11:11:11:11:11
22:22:22:22:22:22 Host:22:22:22:22:22:22
33:33:33:33:33:33 Host:33:33:33:33:33:33
link
100000 6 5
100001 1 4
100002 1 2
100003 5 3
100004 2 3
100005 5 4
100006 1 5
100007 11:11:11:11:11:11 1
100008 22:22:22:22:22:22 4
100009 33:33:33:33:33:33 5
```

前回までと異なり、リンク情報はリンクIDから始まり、送信元、宛先のような順に書き込まれている。
また、path.txtの一例は以下のようになっている。
```
100008 100001 100007 
100009 100005 100008 
```
１行目がHost:22:22:22:22:22:22からHost:11:11:11:11:11:11までの経路、２行目がHost:33:33:33:33:33:33からHost:22:22:22:22:22:22までの経路となっており、経由するノードではなく、経由するリンクのIDが書き込まれる。


まず以下のファイルを変更し、経路情報を保存するようにした。
* [lib/view/vis.rb](https://github.com/handai-trema/topology-owl/blob/master/lib/view/vis.rb)

また、path.txtを出力するにあたって、以下のファイルに変更を加えた。
* [vendor/topology/lib/view/vis.rb](https://github.com/handai-trema/topology-owl/blob/master/lib/command_line.rb)

それぞれについて説明を行う。

##### lib/view/vis.rb
ここでは、トポロジの情報を実際にファイルとして書き出すメソッド等を実装した。


```ruby

```




#### vis.js によるトポロジーおよび経路の表示
ここでは、出力されたトポロジー情報のテキストファイルを読み込み、それを基に vis.js を用いてブラウザ上でトポロジーを表示する。




### 実行結果

まず、次のように課題の内容に従って実機を準備する。



## メモ
実機の設定は前回の設定が残っている。
showコマンドで設定情報を確認すること。
設定用端末のネットワーク設定を逐一確認すること。


##参考文献
- デビッド・トーマス+アンドリュー・ハント(2001)「プログラミング Ruby」ピアソン・エデュケーション.  
- [テキスト: 15章 "ネットワークトポロジを検出する"](http://yasuhito.github.io/trema-book/#topology)  
- [Node.js 環境構築](https://liginc.co.jp/web/programming/node-js/85318)
- [Node.js プログラミング入門](http://libro.tuyano.com/index2?id=1115003)
- [Node.js ビギナーズブック](http://www.nodebeginner.org/index-jp.html#javascript-and-nodejs)
- [Vis.js Network Document](http://visjs.org/docs/network/)
