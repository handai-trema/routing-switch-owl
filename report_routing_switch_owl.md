#情報ネットワーク学演習II 11/16 レポート課題
===========
チーム名　owl  
メンバー 秋下 耀介、坂田 航樹、坂本 昂輝、佐竹 幸大、田中 達也、Jens Oetjen、齊藤 卓哉  

## 役割分担
* 経路選択アルゴリズムのプログラム作成　佐竹
* 可視化のプログラム作成　秋下、坂本
* 経路選択アルゴリズム部分のレポート作成　佐竹
* 可視化部分のレポート作成　秋下、坂本

## 課題 (経路選択アルゴリズムの実装と可視化)

* ルーティングスイッチのダイクストラ法を、別の経路選択アルゴリズムに置き換える
	* 経路の重み (= リンクの太さ) などを導入してもいいです
* コントローラの動作をブラウザで見れるように可視化する
	* 選択した経路やアルゴリズムの動作が分かるように工夫してください


## 解答
本課題に取り組むにあたり、実装箇所を以下の２つに切り分けた。
* 経路選択のアルゴリズム
* 可視化プログラム

以降、それぞれについて説明する。

### 経路選択のアルゴリズム



### 可視化プログラム
本機能の実装を前回と同様に以下の２つに切り分けた。

* 経路情報の取得およびテキストファイル出力(担当：秋下)
* テキスト情報に基づいたvis.jsによる経路の表示（担当：坂本）  
それぞれについての説明を以下に示す。

#### <a id="txt_format" style="color: black;">経路情報のテキストファイル出力</a>



```
1	Switch:1
2	Switch:2
...
10	Switch:10
host
11	Host:11
12	Host:12
...
```



```
...
link
1	4
2	8
...
15	3
16	4
...
```

のようになっており、１列目が送信元ノードのID、２列目が宛先ノードのIDを表している。すなわち、そのノード同士が接続されていることが読み取れるようになっている。ただし、無向グラフとして定義してる。ここでは、リンク情報の前にノード情報が記述されているため、区切り文字として「link」を書き込んでいる。

上記のようなファイルを出力するにあたって、まず以下のファイルを新規作成した。

* [lib/view/vis.rb](https://github.com/handai-trema/topology-owl/blob/master/lib/view/vis.rb)

また、以下のファイルに変更を加えた。

* [lib/command_line.rb](https://github.com/handai-trema/topology-owl/blob/master/lib/command_line.rb)

それぞれについて説明を行う。

##### lib/view/vis.rb
ここでは、トポロジの情報を実際にファイルとして書き出すメソッド等を実装した。
まず以下のように初期化メソッドを定義することで、出力ファイルはデフォルトでlib/view配下に作成するものとした。

```ruby
def initialize(output = 'lib/view/node.txt')
      @output = output
end
```




#### vis.js によるトポロジーおよび経路の表示
ここでは、出力されたトポロジー情報のテキストファイルを読み込み、それを基に vis.js を用いてブラウザ上でトポロジーを表示する。




### 実行結果

まず、次のように課題の内容に従って実機を準備する。



## メモ
実機の設定は前回の設定が残っている。
showコマンドで設定情報を確認すること。
設定用端末のネットワーク設定を逐一確認すること。


##参考文献
- デビッド・トーマス+アンドリュー・ハント(2001)「プログラミング Ruby」ピアソン・エデュケーション.  
- [テキスト: 15章 "ネットワークトポロジを検出する"](http://yasuhito.github.io/trema-book/#topology)  
- [Node.js 環境構築](https://liginc.co.jp/web/programming/node-js/85318)
- [Node.js プログラミング入門](http://libro.tuyano.com/index2?id=1115003)
- [Node.js ビギナーズブック](http://www.nodebeginner.org/index-jp.html#javascript-and-nodejs)
- [Vis.js Network Document](http://visjs.org/docs/network/)
